const { Pool } = require('pg');

const pool = new Pool({
  user: 'postgres',
  host: 'localhost',
  database: 'fe_exam_app',
  password: 'hal',
  port: 5432,
  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
});

async function addOfficialQuestions() {
  try {
    console.log('📝 基本情報技術者試験公式問題を追加中...');
    
    // テクノロジ系 - 基礎理論
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('2進数の1010を10進数に変換すると？', '10', '["8", "10", "12", "14"]', 'テクノロジ系 - 基礎理論', '2進数の1010は、1×2³+0×2²+1×2¹+0×2⁰=8+0+2+0=10です'),
      ('16進数のA5を10進数に変換すると？', '165', '["160", "165", "170", "175"]', 'テクノロジ系 - 基礎理論', '16進数のA5は、A×16¹+5×16⁰=10×16+5×1=160+5=165です'),
      ('論理演算で、A AND Bが真になる条件は？', 'AとBが両方とも真', '["Aが真", "Bが真", "AとBが両方とも真", "AまたはBが真"]', 'テクノロジ系 - 基礎理論', 'AND演算は両方の入力が真の時のみ真になります'),
      ('浮動小数点数の単精度は何ビット？', '32ビット', '["16ビット", "32ビット", "64ビット", "128ビット"]', 'テクノロジ系 - 基礎理論', '単精度浮動小数点数は32ビット（符号1ビット、指数部8ビット、仮数部23ビット）です'),
      ('キャッシュメモリの目的は？', 'アクセス速度の向上', '["容量の増加", "アクセス速度の向上", "コストの削減", "電力消費の削減"]', 'テクノロジ系 - 基礎理論', 'キャッシュメモリはCPUと主記憶装置の間のアクセス速度を向上させるために使用されます')
    `);
    
    // テクノロジ系 - アルゴリズムとプログラミング
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('配列の要素を昇順に並べ替えるアルゴリズムで、最も効率的なのは？', 'クイックソート', '["バブルソート", "選択ソート", "クイックソート", "挿入ソート"]', 'テクノロジ系 - アルゴリズムとプログラミング', 'クイックソートの平均時間計算量はO(n log n)で、最も効率的なソートアルゴリズムの一つです'),
      ('スタックの特徴として正しいのは？', 'LIFO（後入れ先出し）', '["FIFO（先入れ先出し）", "LIFO（後入れ先出し）", "ランダムアクセス", "双方向アクセス"]', 'テクノロジ系 - アルゴリズムとプログラミング', 'スタックは後に入れた要素から先に取り出すLIFO（Last In First Out）の特徴があります'),
      ('再帰関数の特徴として正しいのは？', '自分自身を呼び出す', '["無限ループになる", "自分自身を呼び出す", "メモリ使用量が少ない", "実行速度が速い"]', 'テクノロジ系 - アルゴリズムとプログラミング', '再帰関数は自分自身を呼び出すことで問題を解決する手法です'),
      ('二分探索の時間計算量は？', 'O(log n)', '["O(n)", "O(log n)", "O(n²)", "O(n log n)"]', 'テクノロジ系 - アルゴリズムとプログラミング', '二分探索は配列を半分ずつ絞り込んでいくため、時間計算量はO(log n)です'),
      ('ハッシュテーブルの平均検索時間は？', 'O(1)', '["O(1)", "O(log n)", "O(n)", "O(n²)"]', 'テクノロジ系 - アルゴリズムとプログラミング', 'ハッシュテーブルは理想的な場合、平均検索時間がO(1)の定数時間です')
    `);
    
    // テクノロジ系 - コンピュータ構成要素
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('CPUの命令実行サイクルで、最初に行われるのは？', 'フェッチ', '["フェッチ", "デコード", "実行", "ライトバック"]', 'テクノロジ系 - コンピュータ構成要素', 'CPUの命令実行サイクルは、フェッチ→デコード→実行→ライトバックの順序で行われます'),
      ('マルチコアプロセッサの利点として正しいのは？', '並列処理の実現', '["単一タスクの高速化", "並列処理の実現", "メモリ容量の増加", "電力消費の削減"]', 'テクノロジ系 - コンピュータ構成要素', 'マルチコアプロセッサは複数のコアで並列処理を実現し、全体の処理能力を向上させます'),
      ('仮想メモリの目的は？', '物理メモリの拡張', '["物理メモリの拡張", "アクセス速度の向上", "電力消費の削減", "コストの削減"]', 'テクノロジ系 - コンピュータ構成要素', '仮想メモリはハードディスクの一部をメモリとして使用し、物理メモリを拡張する技術です'),
      ('DMAの役割は？', 'CPUを介さないデータ転送', '["CPUの高速化", "メモリの拡張", "CPUを介さないデータ転送", "電力の節約"]', 'テクノロジ系 - コンピュータ構成要素', 'DMA（Direct Memory Access）はCPUを介さずにメモリとI/Oデバイス間でデータ転送を行います'),
      ('パイプライン処理の目的は？', '命令の並列実行', '["メモリの節約", "命令の並列実行", "電力の節約", "コストの削減"]', 'テクノロジ系 - コンピュータ構成要素', 'パイプライン処理は複数の命令を重複して実行し、全体の処理効率を向上させます')
    `);
    
    // テクノロジ系 - システム構成要素
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('RAID1の特徴は？', 'ミラーリング', '["ストライピング", "ミラーリング", "パリティ", "分散配置"]', 'テクノロジ系 - システム構成要素', 'RAID1はミラーリング方式で、同じデータを複数のディスクに書き込むことで冗長性を確保します'),
      ('クラスタリングの目的は？', '可用性の向上', '["処理速度の向上", "可用性の向上", "容量の増加", "コストの削減"]', 'テクノロジ系 - システム構成要素', 'クラスタリングは複数のサーバーを連携させ、システムの可用性と信頼性を向上させます'),
      ('負荷分散の手法で、最も一般的なのは？', 'ラウンドロビン', '["ラウンドロビン", "優先度方式", "ランダム方式", "重み付け方式"]', 'テクノロジ系 - システム構成要素', 'ラウンドロビンは順番にサーバーに振り分ける最もシンプルで一般的な負荷分散手法です'),
      ('バックアップの種類で、差分バックアップは？', '前回のフルバックアップからの変更分', '["全データのバックアップ", "前回のフルバックアップからの変更分", "前回のバックアップからの変更分", "特定ファイルのみ"]', 'テクノロジ系 - システム構成要素', '差分バックアップは前回のフルバックアップ以降の変更分を保存する方式です'),
      ('ディザスタリカバリの目的は？', '災害時の事業継続', '["処理速度の向上", "災害時の事業継続", "コストの削減", "セキュリティの向上"]', 'テクノロジ系 - システム構成要素', 'ディザスタリカバリは災害発生時に事業を継続するためのシステム復旧計画です')
    `);
    
    // テクノロジ系 - ソフトウェア
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('OSの役割として正しいのは？', 'リソース管理', '["アプリケーション開発", "リソース管理", "ネットワーク構築", "データベース設計"]', 'テクノロジ系 - ソフトウェア', 'OSはCPU、メモリ、ディスクなどのリソースを管理し、アプリケーションに適切に割り当てる役割があります'),
      ('仮想化技術の利点として正しいのは？', 'リソースの効率的利用', '["処理速度の向上", "リソースの効率的利用", "セキュリティの向上", "コストの削減"]', 'テクノロジ系 - ソフトウェア', '仮想化技術により、1台の物理マシンで複数の仮想マシンを動作させ、リソースを効率的に利用できます'),
      ('コンパイラの役割は？', 'ソースコードを機械語に変換', '["プログラムの実行", "ソースコードを機械語に変換", "デバッグの支援", "ドキュメントの生成"]', 'テクノロジ系 - ソフトウェア', 'コンパイラは高級言語で書かれたソースコードを機械語に変換するプログラムです'),
      ('インタープリタの特徴は？', '逐次実行', '["事前コンパイル", "逐次実行", "最適化", "静的解析"]', 'テクノロジ系 - ソフトウェア', 'インタープリタはソースコードを1行ずつ読み込んで実行する方式です'),
      ('ミドルウェアの役割は？', 'アプリケーション間の連携', '["OSの管理", "アプリケーション間の連携", "ハードウェア制御", "ネットワーク構築"]', 'テクノロジ系 - ソフトウェア', 'ミドルウェアは異なるアプリケーション間の連携や通信を支援するソフトウェアです')
    `);
    
    // テクノロジ系 - ヒューマンインターフェース
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('ユーザビリティの要素として正しいのは？', '学習しやすさ', '["処理速度", "学習しやすさ", "容量", "価格"]', 'テクノロジ系 - ヒューマンインターフェース', 'ユーザビリティの要素には、学習しやすさ、効率性、満足度などが含まれます'),
      ('アクセシビリティの目的は？', '誰でも利用可能', '["処理速度の向上", "誰でも利用可能", "コストの削減", "セキュリティの向上"]', 'テクノロジ系 - ヒューマンインターフェース', 'アクセシビリティは障害者や高齢者など、誰でも利用できるようにすることを目的としています'),
      ('ユーザーインターフェース設計で重要なのは？', '一貫性', '["複雑さ", "一貫性", "装飾性", "独自性"]', 'テクノロジ系 - ヒューマンインターフェース', 'ユーザーインターフェース設計では、操作の一貫性を保つことが重要です'),
      ('ヒューリスティック評価の目的は？', 'ユーザビリティの問題発見', '["性能測定", "ユーザビリティの問題発見", "セキュリティ評価", "コスト分析"]', 'テクノロジ系 - ヒューマンインターフェース', 'ヒューリスティック評価は専門家がユーザビリティの問題を発見する手法です'),
      ('プロトタイプの利点は？', '早期のフィードバック', '["低コスト", "早期のフィードバック", "高精度", "迅速な開発"]', 'テクノロジ系 - ヒューマンインターフェース', 'プロトタイプにより、開発の早期段階でユーザーからのフィードバックを得ることができます')
    `);
    
    // テクノロジ系 - マルチメディア
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('JPEGの特徴として正しいのは？', '非可逆圧縮', '["可逆圧縮", "非可逆圧縮", "無圧縮", "動画圧縮"]', 'テクノロジ系 - マルチメディア', 'JPEGは画像の非可逆圧縮方式で、ファイルサイズを小さくする代わりに画質が劣化します'),
      ('MP3の用途は？', '音声圧縮', '["画像圧縮", "音声圧縮", "動画圧縮", "文書圧縮"]', 'テクノロジ系 - マルチメディア', 'MP3は音声データの圧縮方式で、音楽ファイルなどで広く使用されています'),
      ('MPEGの用途は？', '動画圧縮', '["画像圧縮", "音声圧縮", "動画圧縮", "文書圧縮"]', 'テクノロジ系 - マルチメディア', 'MPEGは動画データの圧縮方式で、DVDやBlu-rayなどで使用されています'),
      ('ストリーミングの特徴は？', 'リアルタイム再生', '["高画質", "リアルタイム再生", "大容量", "高圧縮"]', 'テクノロジ系 - マルチメディア', 'ストリーミングは動画や音声をダウンロードしながら同時に再生する技術です'),
      ('VRの特徴として正しいのは？', '没入感', '["高画質", "没入感", "大容量", "高速処理"]', 'テクノロジ系 - マルチメディア', 'VR（仮想現実）はユーザーに没入感を与える技術で、ゲームや教育で使用されます')
    `);
    
    // テクノロジ系 - データベース
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('正規化の目的は？', 'データの重複排除', '["処理速度の向上", "データの重複排除", "容量の削減", "セキュリティの向上"]', 'テクノロジ系 - データベース', '正規化はデータの重複を排除し、データの整合性を保つための手法です'),
      ('インデックスの目的は？', '検索速度の向上', '["容量の削減", "検索速度の向上", "セキュリティの向上", "バックアップの簡素化"]', 'テクノロジ系 - データベース', 'インデックスはデータベースの検索速度を向上させるための仕組みです'),
      ('トランザクションのACID特性で、Aは？', '原子性', '["原子性", "一貫性", "独立性", "永続性"]', 'テクノロジ系 - データベース', 'ACID特性のAはAtomicity（原子性）で、トランザクションが全て実行されるか、全く実行されないかのどちらかであることを保証します'),
      ('ビューの特徴として正しいのは？', '仮想的なテーブル', '["物理的なテーブル", "仮想的なテーブル", "インデックス", "ストアドプロシージャ"]', 'テクノロジ系 - データベース', 'ビューは実際のテーブルから作成される仮想的なテーブルで、セキュリティや使いやすさを向上させます'),
      ('ストアドプロシージャの利点は？', '処理の高速化', '["容量の削減", "処理の高速化", "セキュリティの向上", "バックアップの簡素化"]', 'テクノロジ系 - データベース', 'ストアドプロシージャは事前にコンパイルされたSQL文の集合で、実行速度が速い特徴があります')
    `);
    
    // テクノロジ系 - ネットワーク
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('IPアドレスのクラスAの範囲は？', '1.0.0.0～126.255.255.255', '["1.0.0.0～126.255.255.255", "128.0.0.0～191.255.255.255", "192.0.0.0～223.255.255.255", "224.0.0.0～239.255.255.255"]', 'テクノロジ系 - ネットワーク', 'クラスAは最初のビットが0で始まり、1.0.0.0～126.255.255.255の範囲です'),
      ('サブネットマスクの役割は？', 'ネットワーク部とホスト部の区別', '["IPアドレスの変換", "ネットワーク部とホスト部の区別", "ルーティングの制御", "セキュリティの確保"]', 'テクノロジ系 - ネットワーク', 'サブネットマスクはIPアドレスのネットワーク部とホスト部を区別するために使用されます'),
      ('DHCPの役割は？', 'IPアドレスの自動割り当て', '["ドメイン名の解決", "IPアドレスの自動割り当て", "メールの送信", "ファイルの転送"]', 'テクノロジ系 - ネットワーク', 'DHCPはクライアントにIPアドレスを自動的に割り当てるプロトコルです'),
      ('DNSの役割は？', 'ドメイン名のIPアドレス変換', '["IPアドレスの自動割り当て", "ドメイン名のIPアドレス変換", "メールの送信", "ファイルの転送"]', 'テクノロジ系 - ネットワーク', 'DNSはドメイン名をIPアドレスに変換するシステムです'),
      ('NATの目的は？', 'プライベートIPアドレスの隠蔽', '["通信の暗号化", "プライベートIPアドレスの隠蔽", "帯域制御", "負荷分散"]', 'テクノロジ系 - ネットワーク', 'NATはプライベートIPアドレスをグローバルIPアドレスに変換し、内部ネットワークを隠蔽します')
    `);
    
    // テクノロジ系 - セキュリティ
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('暗号化の種類で、共通鍵暗号の特徴は？', '同じ鍵で暗号化・復号化', '["同じ鍵で暗号化・復号化", "異なる鍵で暗号化・復号化", "鍵が不要", "自動生成"]', 'テクノロジ系 - セキュリティ', '共通鍵暗号は暗号化と復号化に同じ鍵を使用する方式です'),
      ('公開鍵暗号の特徴は？', '公開鍵と秘密鍵のペア', '["1つの鍵のみ", "公開鍵と秘密鍵のペア", "鍵が不要", "自動生成"]', 'テクノロジ系 - セキュリティ', '公開鍵暗号は公開鍵と秘密鍵のペアを使用し、公開鍵で暗号化、秘密鍵で復号化します'),
      ('デジタル署名の目的は？', '改ざんの検知', '["暗号化", "改ざんの検知", "圧縮", "転送"]', 'テクノロジ系 - セキュリティ', 'デジタル署名はデータの改ざんを検知し、送信者の認証を行う技術です'),
      ('ファイアウォールの役割は？', '不正アクセスの遮断', '["通信の高速化", "不正アクセスの遮断", "データの圧縮", "バックアップ"]', 'テクノロジ系 - セキュリティ', 'ファイアウォールは不正アクセスを遮断し、ネットワークのセキュリティを確保します'),
      ('VPNの特徴は？', '暗号化された通信路', '["高速通信", "暗号化された通信路", "大容量転送", "無料利用"]', 'テクノロジ系 - セキュリティ', 'VPNは暗号化された仮想的な通信路を作り、安全な通信を実現します')
    `);
    
    // マネジメント系 - プロジェクトマネジメント
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('プロジェクトの3つの制約は？', 'スコープ・スケジュール・コスト', '["品質・スケジュール・コスト", "スコープ・スケジュール・コスト", "リスク・品質・コスト", "人材・技術・予算"]', 'マネジメント系 - プロジェクトマネジメント', 'プロジェクトマネジメントでは、スコープ・スケジュール・コストの3つの制約をバランスよく管理することが重要です'),
      ('WBSの目的は？', '作業の分解', '["スケジュールの作成", "作業の分解", "コストの算出", "リスクの分析"]', 'マネジメント系 - プロジェクトマネジメント', 'WBS（Work Breakdown Structure）はプロジェクトの作業を階層的に分解する手法です'),
      ('クリティカルパスとは？', '最長の作業経路', '["最短の作業経路", "最長の作業経路", "最安の作業経路", "最適の作業経路"]', 'マネジメント系 - プロジェクトマネジメント', 'クリティカルパスはプロジェクト完了までに最も時間がかかる作業の経路です'),
      ('リスクマネジメントの4つのプロセスは？', '識別・分析・対応・監視', '["計画・実行・監視・終了", "識別・分析・対応・監視", "設計・開発・テスト・運用", "調査・分析・報告・改善"]', 'マネジメント系 - プロジェクトマネジメント', 'リスクマネジメントはリスクの識別、分析、対応、監視の4つのプロセスで構成されます'),
      ('ステークホルダー管理の目的は？', '関係者の期待管理', '["コストの削減", "関係者の期待管理", "品質の向上", "スケジュールの短縮"]', 'マネジメント系 - プロジェクトマネジメント', 'ステークホルダー管理はプロジェクト関係者の期待を適切に管理し、プロジェクトの成功を支援します')
    `);
    
    // マネジメント系 - サービスマネジメント
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('SLAの定義に含まれるのは？', 'サービスレベル', '["技術仕様", "サービスレベル", "運用手順", "セキュリティ要件"]', 'マネジメント系 - サービスマネジメント', 'SLA（Service Level Agreement）はサービス提供者と利用者間で合意するサービスレベルの定義です'),
      ('インシデント管理の目的は？', 'サービスの迅速な復旧', '["問題の根本原因究明", "サービスの迅速な復旧", "変更の管理", "リリースの管理"]', 'マネジメント系 - サービスマネジメント', 'インシデント管理はサービス障害の迅速な復旧を目的としています'),
      ('問題管理の目的は？', '根本原因の究明', '["迅速な復旧", "根本原因の究明", "変更の管理", "リリースの管理"]', 'マネジメント系 - サービスマネジメント', '問題管理はインシデントの根本原因を究明し、再発を防ぐことを目的としています'),
      ('変更管理の目的は？', '変更の制御', '["迅速な復旧", "根本原因の究明", "変更の制御", "リリースの管理"]', 'マネジメント系 - サービスマネジメント', '変更管理はシステム変更を適切に制御し、リスクを最小化することを目的としています'),
      ('リリース管理の目的は？', 'リリースの統制', '["迅速な復旧", "根本原因の究明", "変更の制御", "リリースの統制"]', 'マネジメント系 - サービスマネジメント', 'リリース管理は新しいサービスやシステムのリリースを統制することを目的としています')
    `);
    
    // ストラテジ系 - システム戦略
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('システム化計画の最初の段階は？', '現状分析', '["現状分析", "要件定義", "設計", "開発"]', 'ストラテジ系 - システム戦略', 'システム化計画は現状分析から始まり、問題点や改善点を明確にします'),
      ('ROIの計算式は？', '（利益－投資額）÷投資額×100', '["（利益－投資額）÷投資額×100", "（投資額－利益）÷投資額×100", "利益÷投資額×100", "投資額÷利益×100"]', 'ストラテジ系 - システム戦略', 'ROI（Return on Investment）は投資対効果を表す指標で、（利益－投資額）÷投資額×100で計算されます'),
      ('TCOの構成要素に含まれるのは？', '運用コスト', '["開発コストのみ", "運用コスト", "人件費のみ", "ハードウェアコストのみ"]', 'ストラテジ系 - システム戦略', 'TCO（Total Cost of Ownership）は導入から運用、廃棄までの総コストで、運用コストも含まれます'),
      ('アウトソーシングの利点は？', '専門性の活用', '["コスト削減のみ", "専門性の活用", "品質向上のみ", "リスク軽減のみ"]', 'ストラテジ系 - システム戦略', 'アウトソーシングにより、専門企業の技術やノウハウを活用できます'),
      ('システム監査の目的は？', '適切性の評価', '["性能の測定", "適切性の評価", "コストの算出", "リスクの分析"]', 'ストラテジ系 - システム戦略', 'システム監査はシステムの適切性、効率性、安全性を評価することを目的としています')
    `);
    
    // ストラテジ系 - 経営戦略
    await pool.query(`
      INSERT INTO questions (question, answer, options, category, explanation) VALUES
      ('SWOT分析のSは？', 'Strengths（強み）', '["Strengths（強み）", "Weaknesses（弱み）", "Opportunities（機会）", "Threats（脅威）"]', 'ストラテジ系 - 経営戦略', 'SWOT分析のSはStrengths（強み）で、自社の優位性を分析します'),
      ('PEST分析のPは？', 'Political（政治的）', '["Political（政治的）", "Economic（経済的）", "Social（社会的）", "Technological（技術的）"]', 'ストラテジ系 - 経営戦略', 'PEST分析のPはPolitical（政治的）要因で、法律や規制などの政治的環境を分析します'),
      ('バリューチェーンの目的は？', '価値創造プロセスの分析', '["コスト削減", "価値創造プロセスの分析", "品質向上", "リスク軽減"]', 'ストラテジ系 - 経営戦略', 'バリューチェーンは企業の価値創造プロセスを分析し、競争優位性を明確にします'),
      ('コアコンピタンスとは？', '競争優位の源泉', '["一般的な能力", "競争優位の源泉", "短期的な強み", "外部資源"]', 'ストラテジ系 - 経営戦略', 'コアコンピタンスは他社が模倣困難な競争優位の源泉となる能力です'),
      ('ブルーオーシャン戦略の特徴は？', '新市場の創造', '["既存市場での競争", "新市場の創造", "コスト削減", "品質向上"]', 'ストラテジ系 - 経営戦略', 'ブルーオーシャン戦略は競争のない新市場を創造する戦略です')
    `);
    
    console.log('✅ 基本情報技術者試験公式問題が正常に追加されました！');
    console.log('📊 分類構成（基本情報技術者試験公式）:');
    console.log('   - テクノロジ系: 60%');
    console.log('   - マネジメント系: 20%');
    console.log('   - ストラテジ系: 20%');
    
  } catch (err) {
    console.error('❌ 問題の追加に失敗しました:', err.message);
  } finally {
    await pool.end();
  }
}

addOfficialQuestions(); 